<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <link rel="apple-touch-icon" sizes="300x300" href="apple-touch-icon-300x300.png" />
        <link rel="icon" sizes="300x300" href="apple-touch-icon-300x300.png">
        <meta name="description" content="">
        <meta name="author" content="">
        <title>EasyAdmin Login</title>
        <link rel="stylesheet" href="../css/bootstrap.min.css" />
        <link rel="stylesheet" href="../css/bootstrap-theme.min.css" />
        <link rel="stylesheet" href="../css/loginStyle.css" />
        <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
        <link rel="icon" href="favicon.ico" type="image/x-icon">
        <script src="../js/jquery-2.2.2.min.js"></script>
        <script src="../js/notify.min.js"></script>
        <script src="../js/bootstrap.min.js"></script>
        <meta name="apple-mobile-web-app-title" content="EasyAdmin">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="default">
        <link href="img/apple-touch-startup-image-1536x2008.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" rel="apple-touch-startup-image">
        <link href="img/apple-touch-startup-image-1496x2048.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" rel="apple-touch-startup-image">
        <link href="img/apple-touch-startup-image-768x1004.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 1) and (orientation: portrait)" rel="apple-touch-startup-image">
        <link href="img/apple-touch-startup-image-748x1024.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 1) and (orientation: landscape)" rel="apple-touch-startup-image">
        <link href="img/apple-touch-startup-image-1242x2148.png" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" rel="apple-touch-startup-image">
        <link href="img/apple-touch-startup-image-1182x2208.png" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" rel="apple-touch-startup-image">
        <link href="img/apple-touch-startup-image-750x1294.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image">
        <link href="img/apple-touch-startup-image-640x1096.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image">
        <link href="img/apple-touch-startup-image-640x920.png" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image">
        <link href="img/apple-touch-startup-image-320x460.png" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 1)" rel="apple-touch-startup-image">
        <style>html{ -webkit-text-size-adjust: 100%;}</style>
    </head>
    <body>
        <div class="outer">
            <div class="middle">
                <div class="inner">
                    <div>
                        <img id="logo"  src="../img/logo.png" alt="" title="">
                    </div>
                    <div id="page-content" onKeyPress="return checkSubmit(event)" style="width:320px;">
                        <form method="post" action="">
                            <span id="error" style="display: none"></span>
                            <br />
                            <div class="input-group" style="width: 100%;">
                                <input class="form-control required" type="text" name="username" id="username"  placeholder="Benutzername" autofocus>
                            </div>
                            <p><div class="input-group" style="width: 100%;">
                                <input class="form-control required" type="password" name="password" id="password" size="40" placeholder="Passwort">
                            </div></p>
                            <br />
                            <div id="loginButton">
                                <a href="#" id="login_btn" class="btn btn-primary btn-block" role="button" onclick="proceedLogin();">Login</a>
                                <br />
                            </div>
                            <div style="text-align:center">
                                <a href="/../magento/index.php/admin/index/forgotpassword/">Passwort vergessen?</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <script type="text/javascript">
        function checkSubmit(e) {
            if(e && e.keyCode == 13) {
                proceedLogin();
            }
        }
        $.fn.serializeObject = function() {
          var o = {};
          var a = this.serializeArray();
          $.each(a, function() {
              if (o[this.name] !== undefined) {
                  if (!o[this.name].push) {
                      o[this.name] = [o[this.name]];
                  }
                  o[this.name].push(this.value || '');
              } else {
                  o[this.name] = this.value || '';
              }
          });
            return o;
        };

        function proceedLogin(){
            var payload = JSON.stringify($('form').serializeObject());
            $.ajax({
                url : '../api/login.php',
                type: 'POST',
                data: payload,
                success: function(data){
                    location.reload();
                    //location -> articles.php
                },
                error: function(){
                    $("#login_btn").notify("Ung√ºltiger Login", {
                        position:"right",
                        className: "error"}
                    );
                }
            });
        };
        </script>
    </body>
</html>